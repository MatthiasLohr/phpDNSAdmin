<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>REST-API Debug Tool</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript">
      function addField() {
        // Check for next free Number (max. 100)
        for(i=0;i<100;i++) {
          if(!($("#field_"+i).length > 0)) {
            // Feld erstellen
            html =  "<tr id=\"field_"+i+"\">";
            html += " <td>"+(i+1)+"</td>";
            html += " <td style=\"text-align:center\">";
            html += "   <input id=\"field_key_"+i+"\" type=\"text\" />";
            html += " </td>";
            html += " <td>:</td>";
            html += " <td style=\"text-align:center\">";
            html += "   <input id=\"field_value_"+i+"\" type=\"text\" />";
            html += " </td>";
            html += "</tr>";
            $("#fieldbox").append(html);
            break;
          } else if(i==99) {
            alert('Max. 100 fields!');
          }
        }
      }

      $(document).ready(function() {
        // Pressed Enter?
        $("#url").keypress(function (e) {
          if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
            $('#doIt').click();
          }
        });

        // Clicked the Button
        $("#doIt").click(function() {
          $("#doIt").val("loading...");

          // Generate Field Data
          i = 0;
          while(($("#field_"+i).length > 0)) {
            key = $("#field_key_"+i).val();
            // nur volle Keys
            if(key != '') {
              value = $("#field_value_"+i).val();

              other = $("#hiddenData").val();
              if(other == '') {
                other = key + "=" + value;
              } else {
                other = other + "&" + key + "=" + value;
              }
              $("#hiddenData").val(other);
            }
            i++;
          }

          $.ajax({
            url: $("#url").val(),
            type: $("#method").val(),
            data: $("#hiddenData").val(),
            success: function(data) {
              $('#output').html(data);
              $("#doIt").val('Send');
              $("#hiddenData").val('');
            }
          });
        });

        $("#addField").click(function() {
          addField();
        });

        $("#resetBtn").click(function() {
          i = 0;
          while(($("#field_"+i).length > 0)) {
            $("#field_"+i).remove();
            i++;
          }
        });
      });
    </script>
  </head>
  <body>
    <h2>REST-API Debug Tool</h2>
    <table>
      <tbody>
        <tr>
          <td colspan="2">URL</td>
          <td>Method</td>
        </tr>
        <tr>
          <td colspan="2"><input id="url" value="api/status" type="text" style="width: 600px" /></td>
          <td>
            <select id="method">
              <option value="GET" selected="selected">GET</option>
              <option value="PUT">PUT</option>
              <option value="DELETE">DELETE</option>
              <option value="POST">POST</option>
            </select>
          </td>
        </tr>
        <tr>
          <td style="width: 70px;font-weight: bold">Raw-Output:</td>
          <td style="WORD-BREAK:BREAK-ALL; width:400px" id="output">
          </td>
          <td style="text-align: right">
            <input type="button" id="doIt" value="Send" />
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <table>
              <tbody style="width: 550px">
                <tr>
                  <td style="width: 380px">
                    <table>
                      <tbody id="fieldbox">
                        <tr>
                          <th>#</th>
                          <th style="width:200px">Key</th>
                          <th>&nbsp;</th>
                          <th style="width:200px">Value</th>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td style="margin:0px; vertical-align: top">
                    <input style="margin:0px;padding:0px" id="addField" value="Add field" type="button">
                    <input style="margin:0px;padding:0px" id="resetBtn" value="Reset" type="button">
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
    <input id="hiddenData" type="hidden" />
  </body>
</html>
